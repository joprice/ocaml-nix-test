(executable
 (public_name ocaml_nix)
 (name main)
 (modules main schema)
 (preprocess (pps lwt_ppx ppx_yojson_conv ppx_string_interpolation tyxml-ppx))
 (flags (:standard -w -66))
 (libraries handlers dream dream-livereload dream-encoding dream-cli tyxml
            ;caqti-driver-sqlite3
            caqti-driver-postgresql))


(library
 (name handlers)
 (modules handlers counter)
 (preprocess (pps lwt_ppx ppx_yojson_conv ppx_expect ppx_rapper))
 (flags (:standard -w -66-40))
 (libraries dream)
 (inline_tests))
